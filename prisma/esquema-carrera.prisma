// prisma/esquema-carrera.prisma:

generator carreraClient {
  provider = "prisma-client-js"
  // output   = "./generated/carrera"
  output   = "../node_modules/@prisma/client-carrera"
}

datasource dbCarrera {
  provider = "postgresql"
}

// =========================
//   MODELOS CARRERA / CICLO / MATERIA
// =========================

// Carrera universitaria (p. ej. Desarrollo de Software)
model Carrera {
  id            Int       @id @default(autoincrement())
  nombre        String    @unique
  descripcion   String?
  facultad      String?
  activo        Boolean   @default(true)
  creadoEn      DateTime  @default(now())
  actualizadoEn DateTime  @updatedAt
  ciclos        Ciclo[]
  materias      Materia[]
}

// Ciclo o semestre dentro de una carrera
model Ciclo {
  id     Int     @id @default(autoincrement())
  numero Int // 1, 2, 3...
  nombre String? // "Primer ciclo", "Segundo ciclo", etc.

  carreraId Int
  carrera   Carrera @relation(fields: [carreraId], references: [id])

  materias Materia[]
}

// Materia (asignatura) de una carrera en un ciclo
model Materia {
  id        Int     @id @default(autoincrement())
  nombre    String
  codigo    String  @unique // "DS101", "MAT201", etc.
  creditos  Int     @default(3)
  carreraId Int
  carrera   Carrera @relation(fields: [carreraId], references: [id])
  cicloId   Int
  ciclo     Ciclo   @relation(fields: [cicloId], references: [id])

  // Este campo vincula la materia con una Inscripcion específica
  // en la otra base (BD-Usuario). Es SOLO un ID, la relación se maneja en NestJS.
  inscripcionId Int?
  profesorId    Int? // id de Profesor en BD-Profesor (solo el ID)
  activo Boolean @default(true)
}
