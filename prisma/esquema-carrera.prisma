// prisma/esquema-carrera.prisma:

generator carreraClient {
  provider = "prisma-client-js"
  output   = "../node_modules/@prisma/client-carrera"
}

datasource dbCarrera {
  provider = "postgresql"
}

// =========================
//   MODELOS CARRERA / CICLO / MATERIA
// =========================

model Carrera {
  id            Int       @id @default(autoincrement())
  nombre        String    @unique
  descripcion   String?
  facultad      String?
  activo        Boolean   @default(true)
  creadoEn      DateTime  @default(now())
  actualizadoEn DateTime  @updatedAt
  ciclos        Ciclo[]
  materias      Materia[]
}

model Ciclo {
  id     Int     @id @default(autoincrement())
  numero Int
  nombre String?

  carreraId Int
  carrera   Carrera @relation(fields: [carreraId], references: [id])

  materias Materia[]
}

model Materia {
  id       Int    @id @default(autoincrement())
  nombre   String
  codigo   String @unique
  creditos Int    @default(3)

  carreraId Int
  carrera   Carrera @relation(fields: [carreraId], references: [id])

  cicloId Int
  ciclo   Ciclo @relation(fields: [cicloId], references: [id])

  // Matriculación (ID externo de BD-Usuario)
  inscripcionId Int?

  // Docente (ID externo de BD-Profesor)
  profesorId Int?

  // ✅ Cupos para matriculación (Parte 4)
  cuposDisponibles Int @default(30)

  activo Boolean @default(true)
}
